frame.onload = function() {
  ctx.drawImage(frame, 0, 0, 1080, 1080);

  ctx.font = "bold 70px Playfair Display";
  ctx.fillStyle = "#ffffff";
  ctx.textAlign = "center";
  ctx.shadowColor = "rgba(0,0,0,0.5)";
  ctx.shadowBlur = 20;

  ctx.fillText(
    document.getElementById("eventName").value,
    540,
    1000
  );

  // ----- QRコード生成 -----
  const qrContainer = document.getElementById("qrcode");
  qrContainer.innerHTML = "";

  const siteURL = window.location.href;

  new QRCode(qrContainer, {
    text: siteURL,
    width: 200,
    height: 200
  });

  setTimeout(() => {
    const qrImg = qrContainer.querySelector("img");
    const qr = new Image();

    qr.onload = function() {
      ctx.drawImage(qr, 830, 830, 200, 200);
      document.getElementById("download").href = canvas.toDataURL();
    };

    qr.src = qrImg.src;
  }, 300);
}
